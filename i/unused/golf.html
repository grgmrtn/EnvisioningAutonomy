<html>
	<head>
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0">
        <title>Signal Heads</title>
        <link rel="stylesheet" href="https://use.typekit.net/rva5buu.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/16.3.5/Tween.min.js"></script>
       	<script type="text/javascript" src="js/globals.js"></script>
       	<script type="text/javascript" src="js/golf_assets.js"></script>
        <script type="module" src="js/golf.js"></script>
        <script type="text/javascript">
        	//computes scroll distance down the page and provides it to CSS
        	window.addEventListener('scroll', () => {
        		var scrollAmt = 100 * window.pageYOffset / (document.body.scrollHeight - window.innerHeight);
			  	document.body.style.setProperty('--scroll', scrollAmt);
			  	document.getElementById("scroll_tracker").innerHTML = Math.round(scrollAmt) + "%";

			}, false);

        	//keeps scroll right at top on refresh
			window.onbeforeunload = function () {
			  window.scrollTo(0, 0);
			}

			let scrollerID;

			function autoplay(cmd) {
				let currentScroll = document.body.scrollTop;
				if (cmd == "play") {
					scrollerID = setInterval(function() {
						document.body.scrollTop += 1;
						console.log(document.body.scrollTop);
					}, 10);
					document.getElementById('playbutton').classList.add('autoplay-hidden');
					document.getElementById('pausebutton').classList.remove('autoplay-hidden');
				}
				else if (cmd == "pause") {
					clearInterval(scrollerID);
					document.getElementById('pausebutton').classList.add('autoplay-hidden');
					document.getElementById('playbutton').classList.remove('autoplay-hidden');
				}
			}

        </script>
        <link rel="stylesheet" href="css/style.css">
	</head>
	<body>
		<div id='scroll_tracker' class='debug' style='top: 20'></div>
		<!--<div id='camera_tracker' class='debug' style='top: 60'></div>
		<div id='camera_tracker_d' class='debug' style='top: 120'></div>-->
		<img class='photo' id='bg' src="img/c_bg.jpeg" />
		<a id='playbutton' class='autoplay' onclick='autoplay("play")'>Play</a>
		<a id='pausebutton' class='autoplay autoplay-hidden' onclick='autoplay("pause")'>Pause</a>
		<div class='module_container' id='moduleI'>
			<div class='story_panel_container intro_page'>	
				<div class='story_panel story_full_width sticky_story_panel' id='story_panelI1'>
					<h1 class='page_header'>Where'd the Golf Go</h1>
					<p class='page_subheader'>Not all autonomous vehicles will use roads like cars. Many of them - like delivery robots - will be smaller. Sidewalks are already too narrow. Do we have room to share with these devices?</p>
					<p class='call_to_action page_subheader down_arrow'>&#8595;</p>
				</div>	
				<div class='spacer_12'></div>	
			</div>
			<div class='module_spacer'></div>
		</div>
		<div class='module_container' id='moduleA'>
			<div class='module_child sticky_module_child'>	
				<div class='anim_canvas_container'>
					<canvas class='anim_canvas' id='canvasA'></canvas>
				</div>
			</div>
			<div class='story_panel_container'>	
				<div class='story_panel story_card sticky_story_panel' id='story_panelA1'>
					<h2 class='story_card_header'>The Crosswalk</h2>
					<p class='story_card_copy'>We don't get much time at crosswalks. A piece of equipment called a signal head displays two things: an icon indicating whether the pedestrian should stop or go, and a countdown before the phase changes again.</p>
				</div>	
				<div class='story_spacer'></div>	
			</div>
			<div class='story_panel_container'>
				<div class='story_spacer'></div>
				<div class='story_panel story_card sticky_story_panel' id='story_panelA2'>
					<p class='story_card_copy'>When the signal changes, perpendicular travel paths become available.</p>
				</div>
				<div class='story_spacer'></div>	
			</div>
			<div class='story_panel_container'>
				<div class='story_spacer'></div>
				<div class='story_panel story_card sticky_story_panel' id='story_panelA3'>
					<p class='story_card_copy'>When the signal turns yellow, cars crossing an oncoming travel path are allowed to complete their turn when safe to do so. This intent must also be signalled with indicator lights.</p>
				</div>
				<div class='story_spacer'></div>
				<div class='spacer_12'></div>
				<div class='spacer_12'></div>			
			</div>
			<div class='module_spacer'></div>
		</div>
	</body>
</html>
<!-- 
SCROLL PROPERTY: https://css-tricks.com/books/greatest-css-tricks/scroll-animation/
THREE JS SCROLL: https://tympanus.net/codrops/2022/01/05/crafting-scroll-based-animations-in-three-js/
-->